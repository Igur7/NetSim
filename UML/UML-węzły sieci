@startuml

skinparam packageStyle rectangle

package "Nodes" {

class Ramp {
    + Ramp(id: ElementID, di: TimeOffset) : void
    + deliver_goods(t: Time) : void
    + get_delivery_interval(void) : TimeOffset {query}
    + get_id(void) : ElementID {query}
}

class Worker {
    + Worker(id: ElementID, pd: TimeOffset, q: std::unique_ptr<IPackageQueue>) : void
    + do_work(t: Time) : void
    + get_processing_duration(void) : TimeOffset {query}
    + get_package_processing_start_time(void) : Time {query}
}

class PackageSender {
    - receiver_preferences_: ReceiverPreferences
    + PackageSender(PackageSender&&)
    + send_package(void) : void
    + get_sending_buffer(void) : std::optional<Package>& {query}
    + push_package(Package&&) : void
}

class ReceiverPreferences {
    - preferences_t
    + ReceiverPreferences(pg: ProbabilityGenerator)
    + add_receiver(r: IPackageReceiver*) : void
    + remove_receiver(r: IPackageReceiver*) : void
    + choose_receiver(void) : IPackageReceiver*
    + get_preferences(void) : preferences_t& {query}
}

class Storehouse {
    + Storehouse(id: ElementID, d: std::unique_ptr<IPackageStockpile>)
}

interface IPackageReceiver {
    + receive_package(p: Package&&) : void
    + get_id(void) : ElementID {query}
}

}

package "Storage" {

interface IPackageQueue{
__
    + {abstract} pop() : Package
    + {abstract} get_queue_type() : PackageQueueType {query}

}
interface IPackageStockpile{
__
    + push(Package&&) : void
    + empty() : bool {query}
    + size() : size_type {query}
    + begin() : const_iterator
    + end() : const_iterator
    + cbegin() : const_iterator
    + cend() : const_iterator
    + {abstract} ~IPackageStockpile()
    }
}
class ElementID << (T,orchid) primitive>>
class Time << (T,orchid) primitive>>
class TimeOffset << (T,orchid) primitive>>
class ProbabillityGenerator << (T,orchid) primitive>>


' Relationships
Ramp--|>PackageSender
Worker--|>PackageSender
PackageSender o-- ReceiverPreferences
Worker--|>IPackageReceiver
Storehouse--|>IPackageReceiver
Worker *-- IPackageQueue
Storehouse *-- IPackageStockpile




@enduml
